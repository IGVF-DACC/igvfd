{
    "title": "In Vitro System",
    "$id": "/profiles/in_vitro_system.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Schema for submitting a sample grown in a in vitro system.",
    "type": "object",
    "required": [
        "award",
        "lab",
        "source",
        "donors",
        "biosample_term",
        "classification"
    ],
    "identifyingProperties": [
        "uuid",
        "accession",
        "alternate_accessions",
        "aliases"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "sample.json#/properties"
        },
        {
            "$ref": "biosample.json#/properties"
        },
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        },
        {
            "$ref": "mixins.json#/product_info"
        },
        {
            "$ref": "mixins.json#/url"
        },
        {
            "$ref": "mixins.json#/taxa"
        }
    ],
    "dependentSchemas": {
        "$merge": [
            "biosample.json#/dependentSchemas"
        ],
        "passage_number": {
            "comment": "Only in vitro system with classification as a cell line are allowed to have passage_number property.",
            "properties": {
                "classification": {
                    "enum": [
                        "cell line"
                    ]
                }
            }
        },
        "classification": {
            "comment": "If an in vitro system is of classification organoid, differentiated cell specimen, or reprogrammed cell specimen then targeted_sample_term, cell_fate_change_treatments, time_post_change, and time_post_change_units are required.",
            "if": {
                "properties": {
                    "classification": {
                        "enum": [
                            "organoid",
                            "differentiated cell specimen",
                            "reprogrammed cell specimen"
                        ]
                    }
                },
                "required": [
                    "classification"
                ]
            },
            "then": {
                "required": [
                    "time_post_change",
                    "time_post_change_units",
                    "cell_fate_change_treatments",
                    "targeted_sample_term"
                ]
            }
        }
    },
    "dependentRequired": {
        "time_post_change": [
            "time_post_change_units",
            "cell_fate_change_treatments"
        ],
        "time_post_change_units": [
            "time_post_change",
            "cell_fate_change_treatments"
        ],
        "cell_fate_change_treatments": [
            "time_post_change_units",
            "time_post_change"
        ]
    },
    "properties": {
        "schema_version": {
            "default": "11"
        },
        "classification": {
            "title": "Classification",
            "description": "The general category of this type of in vitro system.",
            "comment": "Required property. The specified category should match the ontology type used to describe this type of in vitro system. For example 'brain organoid' uses UBERON ontology, cell lines use CL ontology, etc. Differentiated, reprogrammed, and pooled cell specimen are in concordance with NCIT definitions.",
            "type": "string",
            "enum": [
                "organoid",
                "gastruloid",
                "embryoid",
                "cell line",
                "differentiated cell specimen",
                "reprogrammed cell specimen",
                "pooled cell specimen"
            ]
        },
        "time_post_change": {
            "title": "Time Post Change",
            "description": "The time that elapsed past the time-point when the cell fate change treatments were introduced.",
            "comment": "Use in conjunction with time_post_change_units to specify time elapsed post cell fate change treatment introduction. Use of this property requires time_post_change_units specification.",
            "type": "number"
        },
        "time_post_change_units": {
            "title": "Time Post Change Units",
            "description": "The units of time that elapsed past the point when the cell fate change treatments were introduced.",
            "comment": "Use in conjunction with time_post_change to specify time elapsed post cell fate change treatment introduction. Use of this property requires time_post_change specification.",
            "type": "string",
            "enum": [
                "minute",
                "hour",
                "day",
                "week",
                "month"
            ]
        },
        "date_obtained": {
            "title": "Date Collected"
        },
        "cell_fate_change_treatments": {
            "title": "Cell Fate Change Treatments",
            "description": "A list of treatments applied to the biosample with the purpose of differentiation, dedifferentiation, or reprogramming.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "title": "Treatment",
                "description": "A treatment applied to the biosample.",
                "type": "string",
                "linkTo": "Treatment"
            }
        },
        "originated_from": {
            "title": "Originated From",
            "description": "The biosample this in vitro system sample was originated from.",
            "type": "string",
            "linkTo": "Biosample"
        },
        "part_of": {
            "linkTo": "Biosample",
            "type": "string"
        },
        "pooled_from": {
            "items": {
                "linkTo": "Biosample",
                "type": "string"
            }
        },
        "passage_number": {
            "title": "Passage Number",
            "description": "Number of passages including the passages from the source.",
            "comment": "In calculating passage number, include passages from the source. Use of this property requires classification to be a cell line.",
            "type": "integer",
            "minimum": 0
        },
        "targeted_sample_term": {
            "title": "Targeted Sample Term",
            "description": "Ontology term identifying the targeted endpoint biosample resulting from differentation or reprogramming.",
            "type": "string",
            "linkTo": "SampleTerm"
        }
    },
    "fuzzy_searchable_fields": [
        "classification",
        "taxa"
    ],
    "exact_searchable_fields": [
        "@type",
        "dbxrefs",
        "nih_institutional_certification"
    ],
    "changelog": "/profiles/changelogs/in_vitro_system.md"
}
