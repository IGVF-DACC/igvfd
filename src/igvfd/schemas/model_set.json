{
    "title": "Model Set",
    "description": "A file set grouping files that represent trained predictive models. Model file sets contain data files that could be used by predictive modeling software to generate predictions or annotations of genomic features such as genomic variants.",
    "$id": "/profiles/model_set.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "required": [
        "lab",
        "award",
        "model_name",
        "file_set_type",
        "model_version",
        "prediction_objects",
        "software_version"
    ],
    "not": {
        "comment": "Model file sets should not specify any donors or samples.",
        "anyOf": [
            {
                "required": [
                    "samples"
                ]
            },
            {
                "required": [
                    "donors"
                ]
            }
        ]
    },
    "identifyingProperties": [
        "uuid",
        "accession",
        "alternate_accessions",
        "aliases"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "file_set.json#/properties"
        },
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/url"
        },
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        },
        {
            "$ref": "mixins.json#/publication_identifiers"
        }
    ],
    "properties": {
        "schema_version": {
            "default": "2"
        },
        "model_name": {
            "title": "Model Name",
            "description": "The custom lab name given to this predictive model set.",
            "type": "string",
            "submissionExample": {
                "appscript": "ABC model",
                "igvf_utils": "ABC model"
            }
        },
        "model_version": {
            "title": "Model Version",
            "description": "The semantic version number for this predictive model set.",
            "type": "string",
            "pattern": "^v(?!0\\.0\\.0$)[0-9]+\\.[0-9]+\\.[0-9]+$",
            "submissionExample": {
                "appscript": "v1.0.1",
                "igvf_utils": "v1.0.1"
            }
        },
        "file_set_type": {
            "title": "File Set Type",
            "description": "The category that best describes this predictive model set.",
            "type": "string",
            "enum": [
                "neural network",
                "random forest",
                "decision tree",
                "support vector machine"
            ],
            "submissionExample": {
                "appscript": "neural network",
                "igvf_utils": "neural network"
            }
        },
        "prediction_objects": {
            "title": "Prediction Objects",
            "description": "The objects this predictive model set is targeting.",
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "items": {
                "title": "Prediction Object",
                "description": "An object this predictive model set is targeting.",
                "type": "string",
                "enum": [
                    "coding variants",
                    "non-coding variants",
                    "all variants",
                    "regulatory elements",
                    "genes"
                ]
            },
            "submissionExample": {
                "appscript": "[\"coding variants\", \"genes\"]",
                "igvf_utils": "coding variants, genes"
            }
        },
        "input_file_sets": {
            "title": "Input File Sets",
            "description": "The file set(s) that served as inputs for the derivation of this model set.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "title": "Input File Set",
                "description": "A file set that serves as input for the derivation of this model set.",
                "type": "string",
                "linkTo": "FileSet"
            },
            "submissionExample": {
                "appscript": "[\"john-doe:measurement_set01\", \"TSTDS98084730\"]",
                "igvf_utils": "john-doe:measurement_set01, TSTDS98084730"
            }
        },
        "model_zoo_location": {
            "title": "Model Zoo Location",
            "description": "The link to the model on the Kipoi repository.",
            "type": "string",
            "pattern": "^https?://kipoi\\.org/models/(\\S+)$",
            "submissionExample": {
                "appscript": "https://kipoi.org/models/Basset/",
                "igvf_utils": "https://kipoi.org/models/Basset/"
            }
        },
        "software_version": {
            "title": "Software Version",
            "description": "Version of software used for the derivation of this model set.",
            "type": "string",
            "linkTo": "SoftwareVersion",
            "submissionExample": {
                "appscript": "igvf:bedtoolsv109 or bedtools-v.1.0.9",
                "igvf_utils": "igvf:bedtoolsv109 or bedtools-v.1.0.9"
            }
        },
        "samples": {
            "comment": "Do not submit. Model sets should not specify any samples."
        },
        "donors": {
            "comment": "Do not submit. Model sets should not specify any donors."
        }
    },
    "fuzzy_searchable_fields": [
        "@type",
        "collections",
        "dbxrefs",
        "lab.title",
        "model_name",
        "file_set_type",
        "prediction_objects",
        "summary"
    ],
    "exact_searchable_fields": [
        "control_for.accession",
        "control_for.aliases",
        "dbxrefs",
        "files.accession",
        "files.aliases",
        "input_file_sets.accession",
        "input_file_sets.aliases",
        "publication_identifiers",
        "submitted_by.title"
    ],
    "changelog": "/profiles/changelogs/model_set.md"
}
