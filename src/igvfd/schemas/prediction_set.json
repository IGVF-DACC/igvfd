{
    "title": "Prediction Set",
    "description": "A file set of computational predictions. Prediction sets contain results of analyses to predict functions or traits of genomic features.",
    "$id": "/profiles/prediction_set.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "oneOf": [
        {
            "required": [
                "lab",
                "award",
                "file_set_type",
                "samples"
            ]
        },
        {
            "required": [
                "lab",
                "award",
                "file_set_type",
                "donors"
            ]
        }
    ],
    "identifyingProperties": [
        "uuid",
        "accession",
        "alternate_accessions",
        "aliases"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "file_set.json#/properties"
        },
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/url"
        },
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        },
        {
            "$ref": "mixins.json#/publication_identifiers"
        }
    ],
    "dependentSchemas": {
        "$merge": [
            "file_set.json#/dependentSchemas"
        ],
        "scope": {
            "comment": "If scope is genes then targeted_genes is required, if scope is loci then targeted_loci is required, if scope is genome-wide then targeted_genes and targeted_loci shouldn't be specified.",
            "oneOf": [
                {
                    "required": [
                        "targeted_genes"
                    ],
                    "properties": {
                        "scope": {
                            "enum": [
                                "genes"
                            ]
                        }
                    }
                },
                {
                    "required": [
                        "targeted_loci"
                    ],
                    "properties": {
                        "scope": {
                            "enum": [
                                "loci"
                            ]
                        }
                    }
                },
                {
                    "not": {
                        "required": [
                            "targeted_genes",
                            "targeted_loci"
                        ]
                    },
                    "properties": {
                        "scope": {
                            "enum": [
                                "genome-wide"
                            ]
                        }
                    }
                }
            ]
        },
        "targeted_genes": {
            "comment": "Specification of targeted_genes requires that scope is genes.",
            "properties": {
                "scope": {
                    "enum": [
                        "genes"
                    ]
                }
            }
        },
        "targeted_loci": {
            "comment": "Specification of targeted_loci requires that scope is loci.",
            "properties": {
                "scope": {
                    "enum": [
                        "loci"
                    ]
                }
            }
        }
    },
    "properties": {
        "schema_version": {
            "default": "2"
        },
        "file_set_type": {
            "title": "File Set Type",
            "description": "The category that best describes this prediction set.",
            "type": "string",
            "enum": [
                "pathogenicity",
                "functional effect",
                "protein stability",
                "activity level"
            ],
            "submissionExample": {
                "appscript": "pathogenicity",
                "igvf_utils": "pathogenicity"
            }
        },
        "scope": {
            "title": "Prediction Scope",
            "description": "The scope or scale that this prediction set is designed to target. If the scope is across gene(s) or loci, these will need to be specified in the targeted_genes or targeted_loci property.",
            "type": "string",
            "enum": [
                "genes",
                "loci",
                "genome-wide"
            ],
            "submissionExample": {
                "appscript": "genes",
                "igvf_utils": "genes"
            }
        },
        "targeted_genes": {
            "title": "Targeted Genes",
            "description": "The specific gene(s) this prediction set was designed to target.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "comment": "See gene.json for a list of available identifiers.",
                "type": "string",
                "linkTo": "Gene"
            },
            "submissionExample": {
                "appscript": "[\"ENSMUSG00000044487\", \"john-doe:gene01\"]",
                "igvf_utils": "ENSMUSG00000044487, john-doe:gene01"
            }
        },
        "targeted_loci": {
            "title": "Targeted Loci",
            "description": "The specific chromosomal region(s) this prediction set was designed to target.",
            "comment": "Each locus is defined using 1-based, fully-closed (inclusive) coordinates for a specific version of the reference genome assembly.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "title": "Targeted Locus",
                "type": "object",
                "required": [
                    "assembly",
                    "chromosome",
                    "start",
                    "end"
                ],
                "additionalProperties": false,
                "properties": {
                    "assembly": {
                        "title": "Mapping assembly",
                        "description": "The genome assembly to which coordinates relate (e.g., GRCh38).",
                        "type": "string",
                        "enum": [
                            "GRCh38",
                            "hg19",
                            "GRCm39",
                            "mm10",
                            "mm9"
                        ]
                    },
                    "chromosome": {
                        "title": "Chromosome",
                        "description": "The number (or letter) designation for the chromosome, e.g. chr1 or chrX",
                        "type": "string",
                        "pattern": "^(chr[0-9A-Za-z]+)$"
                    },
                    "start": {
                        "title": "Start",
                        "description": "The 1-based, closed (inclusive) starting coordinate.",
                        "type": "integer",
                        "minimum": 1
                    },
                    "end": {
                        "title": "End",
                        "description": "The 1-based, closed (inclusive) ending coordinate.",
                        "type": "integer",
                        "minimum": 1
                    }
                }
            },
            "submissionExample": {
                "appscript": "[{\"assembly\": \"GRCh38\", \"chromosome\": \"chr1\", \"start\": 100, \"end\": 200}]",
                "igvf_utils": "[{\"assembly\": \"GRCh38\", \"chromosome\": \"chr1\", \"start\": 100, \"end\": 200}]"
            }
        }
    },
    "fuzzy_searchable_fields": [
        "@type",
        "collections",
        "file_set_type",
        "lab.title",
        "samples.summary",
        "samples.sample_terms",
        "summary"
    ],
    "exact_searchable_fields": [
        "control_for.accession",
        "control_for.aliases",
        "dbxrefs",
        "files.accession",
        "files.aliases",
        "publication_identifiers",
        "samples.accession",
        "samples.aliases",
        "donors.accession",
        "donors.aliases",
        "submitted_by.title"
    ],
    "changelog": "/profiles/changelogs/prediction_set.md"
}
