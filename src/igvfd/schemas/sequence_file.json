{
    "title": "Sequence File",
    "$id": "/profiles/sequence_file.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "A file containing sequencing results in bam, fastq, or pod5 formats.",
    "required": [
        "award",
        "lab",
        "md5sum",
        "file_format",
        "file_set",
        "content_type",
        "sequencing_platform",
        "sequencing_run",
        "controlled_access"
    ],
    "identifyingProperties": [
        "uuid",
        "accession",
        "alternate_accessions",
        "aliases",
        "md5sum"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "file.json#/properties"
        },
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        },
        {
            "$ref": "mixins.json#/release_timestamp"
        },
        {
            "$ref": "mixins.json#/controlled_access"
        },
        {
            "$ref": "mixins.json#/external_host"
        },
        {
            "$ref": "mixins.json#/preview_timestamp"
        },
        {
            "$ref": "mixins.json#/base_modifications"
        }
    ],
    "dependentSchemas": {
        "$merge": [
            "file.json#/dependentSchemas",
            "shared_dependencies.json#/external_host"
        ],
        "file_format": {
            "comment": "Once validated, fastq files must have read count and the minimum, maximum, and mean read lengths.",
            "if": {
                "properties": {
                    "file_format": {
                        "const": "fastq"
                    },
                    "upload_status": {
                        "const": "validated"
                    }
                },
                "required": [
                    "upload_status"
                ]
            },
            "then": {
                "required": [
                    "minimum_read_length",
                    "maximum_read_length",
                    "mean_read_length",
                    "read_count"
                ]
            }
        },
        "content_type": {
            "comment": "The file format should match the content type of the file. Reads should be in fastq format. PacBio subreads should be in bam format. Nanopore reads should be in pod5 format.",
            "oneOf": [
                {
                    "properties": {
                        "content_type": {
                            "const": "reads"
                        },
                        "file_format": {
                            "const": "fastq"
                        }
                    }
                },
                {
                    "properties": {
                        "content_type": {
                            "const": "PacBio subreads"
                        },
                        "file_format": {
                            "const": "bam"
                        }
                    }
                },
                {
                    "properties": {
                        "content_type": {
                            "const": "Nanopore reads"
                        },
                        "file_format": {
                            "const": "pod5"
                        }
                    }
                }
            ]
        },
        "base_modifications": {
            "comment": "Only Nanopore reads can specify base modifications.",
            "properties": {
                "content_type": {
                    "const": "Nanopore reads"
                }
            }
        }
    },
    "type": "object",
    "properties": {
        "schema_version": {
            "default": "16"
        },
        "content_type": {
            "comment": "Content Type describes the content of the file.",
            "enum": [
                "Nanopore reads",
                "PacBio subreads",
                "reads"
            ],
            "enum_descriptions": {
                "Nanopore reads": "Signal measured from DNA or RNA fragments generated by Nanopore sequencing technology stored in pod5 file format.",
                "PacBio subreads": "Individual sequences of bases corresponding to DNA or RNA fragments generated by PacBio (Pacific Biosciences) sequencing technology stored in BAM file format.",
                "reads": "Individual sequences of bases corresponding to DNA or RNA fragments stored in FASTQ file format."
            },
            "submissionExample": {
                "appscript": "reads",
                "igvf_utils": "reads"
            }
        },
        "file_format": {
            "enum": [
                "bam",
                "fastq",
                "pod5"
            ],
            "submissionExample": {
                "appscript": "fastq",
                "igvf_utils": "fastq"
            }
        },
        "dbxrefs": {
            "comment": "Supported external resources include: Sequence Read Archive (SRA).",
            "items": {
                "title": "External identifier",
                "description": "Identifier from an external resource that may have 1-to-1 or 1-to-many relationships with IGVF file objects.",
                "type": "string",
                "minItems": 1,
                "pattern": "^(SRA:(SRR|SRX)\\d+)$"
            },
            "submissionExample": {
                "appscript": "[\"SRA:SRR1234\", \"SRA:SRX1234\"]",
                "igvf_utils": "SRA:SRR1234, SRA:SRX1234"
            }
        },
        "flowcell_id": {
            "title": "Flowcell ID",
            "description": "The alphanumeric identifier for the flowcell of a sequencing machine.",
            "type": "string",
            "pattern": "^[a-zA-Z0-9-]+$",
            "submissionExample": {
                "appscript": "HJTW3BBXY",
                "igvf_utils": "HJTW3BBXY"
            }
        },
        "lane": {
            "title": "Lane",
            "description": "An integer identifying the lane of a sequencing machine.",
            "type": "integer",
            "minimum": 1,
            "submissionExample": {
                "appscript": 1,
                "igvf_utils": 1
            }
        },
        "read_count": {
            "title": "Read Count",
            "description": "Number of reads in a fastq file.",
            "comment": "Do not submit. This value is calculated by the checkfiles script upon submission.",
            "permission": "admin_only",
            "type": "integer",
            "minimum": 0
        },
        "minimum_read_length": {
            "title": "Minimum Read Length",
            "description": "For high-throughput sequencing, the minimum number of contiguous nucleotides determined by sequencing.",
            "comment": "Do not submit. This value is calculated by the checkfiles script upon submission.",
            "permission": "admin_only",
            "type": "integer",
            "minimum": 0,
            "maximum": 300000000
        },
        "maximum_read_length": {
            "title": "Maximum Read Length",
            "description": "For high-throughput sequencing, the maximum number of contiguous nucleotides determined by sequencing.",
            "comment": "Do not submit. This value is calculated by the checkfiles script upon submission.",
            "permission": "admin_only",
            "type": "integer",
            "minimum": 0,
            "maximum": 300000000
        },
        "mean_read_length": {
            "title": "Mean Read Length",
            "description": "For high-throughput sequencing, the mean number of contiguous nucleotides determined by sequencing.",
            "comment": "Do not submit. This value is calculated by the checkfiles script upon submission.",
            "permission": "admin_only",
            "type": "number",
            "minimum": 0,
            "maximum": 300000000
        },
        "seqspec_document": {
            "title": "Seqspec Document",
            "description": "A seqspec document describing the library and read structure.",
            "type": "string",
            "linkTo": "Document",
            "submissionExample": {
                "appscript": "/documents/f47ac10b-58cc-4372-a567-0e02b2c3d479/",
                "igvf_utils": "/documents/f47ac10b-58cc-4372-a567-0e02b2c3d479/"
            }
        },
        "sequencing_platform": {
            "title": "Sequencing Platform",
            "description": "The measurement device used to produce sequencing data.",
            "type": "string",
            "linkTo": "PlatformTerm",
            "submissionExample": {
                "appscript": "/platform-terms/EFO_0004203/",
                "igvf_utils": "/platform-terms/EFO_0004203/"
            }
        },
        "sequencing_kit": {
            "title": "Sequencing Kit",
            "description": "A reagent kit used with a library to prepare it for sequencing.",
            "type": "string",
            "enum": [
                "AVITI 2x75 Sequencing Kit Cloudbreak High Output",
                "AVITI 2x150 Sequencing Kit Cloudbreak High Output",
                "HiSeq SBS Kit v4",
                "HiSeq SR Cluster Kit v4-cBot-HS",
                "HiSeq PE Cluster Kit v4-cBot-HS",
                "HiSeq SR Rapid Cluster Kit v2",
                "HiSeq PE Rapid Cluster Kit v2",
                "HiSeq Rapid SBS Kit v2",
                "HiSeq 3000/4000 SBS Kit",
                "HiSeq 3000/4000 SR Cluster Kit",
                "HiSeq 3000/4000 PE Cluster Kit",
                "MiSeq Reagent Kit v2",
                "NextSeq 500 Mid Output Kit",
                "NextSeq 500 High Output Kit",
                "NextSeq 500 Mid Output v2 Kit",
                "NextSeq 500 High Output v2 Kit",
                "NextSeq 500/550 Mid-Output v2.5 Kit",
                "NextSeq 500/550 High-Output v2.5 Kit",
                "TG NextSeq 500/550 Mid-Output Kit v2.5",
                "TG NextSeq 500/550 High-Output Kit v2.5",
                "NextSeq 1000/2000 P1 Reagent Kit",
                "NextSeq 1000/2000 P2 Reagent Kit",
                "NextSeq 1000/2000 P3 Reagent Kit",
                "NextSeq 1000/2000 P1 XLEAP-SBS Reagent Kit",
                "NextSeq 1000/2000 P2 XLEAP-SBS Reagent Kit",
                "NextSeq 2000 P3 XLEAP-SBS Reagent Kit",
                "NextSeq 2000 P4 XLEAP-SBS Reagent Kit",
                "NovaSeq 6000 SP Reagent Kit v1.5",
                "NovaSeq 6000 S1 Reagent Kit v1.5",
                "NovaSeq 6000 S2 Reagent Kit v1.5",
                "NovaSeq 6000 S4 Reagent Kit v1.5",
                "NovaSeq X Series 1.5B Reagent Kit",
                "NovaSeq X Series 10B Reagent Kit",
                "NovaSeq X Series 25B Reagent Kit",
                "ONT Ligation Sequencing Kit V14",
                "Sequel sequencing kit 3.0",
                "Sequel II sequencing kit 2.0",
                "Singular G4 F2 Reagent Kit"
            ],
            "submissionExample": {
                "appscript": "HiSeq SBS Kit v4",
                "igvf_utils": "HiSeq SBS Kit v4"
            }
        },
        "sequencing_run": {
            "title": "Sequencing Run",
            "description": "An ordinal number indicating which sequencing run of the associated library that the file belongs to.",
            "type": "integer",
            "minimum": 1,
            "submissionExample": {
                "appscript": 2,
                "igvf_utils": 2
            }
        },
        "illumina_read_type": {
            "title": "Illumina Read Type",
            "description": "The read type of the file. Relevant only for files produced using an Illumina sequencing platform.",
            "type": "string",
            "enum": [
                "R1",
                "R2",
                "R3",
                "I1",
                "I2"
            ],
            "submissionExample": {
                "appscript": "R1",
                "igvf_utils": "R1"
            }
        },
        "index": {
            "title": "Index",
            "description": "An Illumina index associated with the file.",
            "type": "string",
            "submissionExample": {
                "appscript": "ACTGGTCC",
                "igvf_utils": "ACTGGTCC"
            }
        },
        "read_names": {
            "title": "Read Names",
            "description": "The read names of a sequence file based on how it will be used by uniform pipelines.",
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "items": {
                "title": "Read Name",
                "description": "The read name of a sequence file based on how it will be used by uniform pipelines.",
                "type": "string",
                "enum": [
                    "Read 1",
                    "Read 2",
                    "Barcode index",
                    "Barcode forward",
                    "UMI",
                    "Barcode reverse"
                ],
                "enum_descriptions": {
                    "Read 1": "Read name associated with the single-cell uniform processing pipeline.",
                    "Read 2": "Read name associated with the single-cell uniform processing pipeline.",
                    "Barcode index": "Read name associated with the single-cell uniform processing pipeline.",
                    "Barcode forward": "Read name for forward-read files associated with the MPRA uniform processing pipeline.",
                    "UMI": "Read name for index-read files associated with the MPRA uniform processing pipeline.",
                    "Barcode reverse": "Read name for reverse-read files associated with the MPRA uniform processing pipeline."
                }
            },
            "submissionExample": {
                "appscript": "[\"Read 1\"]",
                "igvf_utils": "Read 1"
            }
        }
    },
    "fuzzy_searchable_fields": [
        "aliases",
        "assay_titles",
        "content_type",
        "description",
        "file_format_specifications.description",
        "file_set.samples.summary",
        "file_set.summary",
        "lab.title",
        "submitted_by.title",
        "submitted_file_name",
        "summary",
        "workflows.name"
    ],
    "exact_searchable_fields": [
        "@type",
        "dbxrefs",
        "file_format",
        "file_set.accession"
    ],
    "changelog": "/profiles/changelogs/sequence_file.md"
}
