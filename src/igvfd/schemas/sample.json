{ 
    "title": "Sample",
    "id": "/profiles/sample.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Abstract schema for submitting a specific biological or synthetic sample.",
    "type": "object",
    "required": [ "award", "lab" ],  
    "identifyingProperties": [ "uuid", "accession", "alternate_accessions", "aliases"],   
    "additionalProperties": false,    
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },         
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/accession" },
        { "$ref": "mixins.json#/alternate_accessions" },
        { "$ref": "mixins.json#/accessioned_status" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/submitted" },
        { "$ref": "mixins.json#/attribution" },
        { "$ref": "mixins.json#/submitter_comment" },
        { "$ref": "mixins.json#/notes" },
        { "$ref": "mixins.json#/documents" },
        { "$ref": "mixins.json#/product_id" },       
        { "$ref": "mixins.json#/lot_id" },
        { "$ref": "mixins.json#/source" },
        { "$ref": "mixins.json#/url" }
    ],
    "dependentSchemas": {
        "lot_id": {
            "required": ["product_id"],
            "comment": "Sample with lot_id must include product_id."
        }
    },
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "accession": {
            "accessionType": "SM"
        },
        "starting_amount": {
            "title": "Starting amount",
            "description": "The initial quantity of samples obtained.",
            "type": "number",
            "minimum":0
        },
        "starting_amount_units": {
            "title": "Starting amount units",
            "description": "The units used to quantify the amount of samples obtained.",
            "type": "string",
            "enum": [
                "cells",
                "cells/ml",
                "g",
                "items",
                "mg",
                "whole animals",
                "whole embryos",
                "Î¼g",
                "ng"
            ]
        },
        "dbxrefs": {
            "@type": "@id",
            "rdfs:subPropertyOf": "rdfs:seeAlso",
            "title": "External resources",
            "description": "Biosample identifiers from external resources, such as Biosample database or Cellosaurus.",
            "comment": "Do not submit. DCC personnel is responsible for submission of biosample external resource identifiers.",
            "permission": "import_items",
            "type": "array",
            "default": [],
            "uniqueItems": true,
            "items": {
                "title": "External identifier",
                "description": "An identifier from external resource.",
                "type":  "string",
                "pattern": "^((UCSC-ENCODE-cv:[\\S\\s\\d\\-\\(\\)\\+]+)|(GTEx:[a-zA-Z0-9\\-_]+)|(GEO:SAMN\\d+)|(Cellosaurus:CVCL_\\w{4}))$"
            }
        }
    },
    "facets": {
        "status": {
            "title": "Status"
        },
        "lab.title": {
            "title": "Lab"
        },
        "award.project": {
            "title": "Project"
        }
    },
    "changelog": "/profiles/changelogs/sample.md"
}
