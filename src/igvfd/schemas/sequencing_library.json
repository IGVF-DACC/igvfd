{
    "title": "Sequencing Library",
    "description": "Schema for submitting a sequencing library.",
    "$id": "/profiles/sequencing_library.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "required": [
        "nucleic_acid_term_name",
        "lab",
        "award"
    ],
    "identifyingProperties": [
        "uuid",
        "aliases",
        "accession",
        "alternate_accessions"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        },
        {
            "$ref": "mixins.json#/product_info"
        },
        {
            "$ref": "mixins.json#/standard_status"
        }
    ],
    "dependentSchemas": {
        "product_id": [
            "source"
        ],
        "average_fragment_size": {
            "not": {
                "required": [
                    "lower_bound_fragment_size",
                    "upper_bound_fragment_size"
                ]
            }
        },
        "lower_bound_fragment_size": {
            "comment": "Biosample with a defined lower_bound_fragment_size requires upper_bound_fragment_size and not average_fragment_size.",
            "required": [
                "upper_bound_fragment_size"
            ],
            "not": {
                "required": [
                    "average_fragment_size"
                ]
            }
        },
        "upper_bound_fragment_size": {
            "comment": "Biosample with a defined upper_bound_fragment_size requires lower_bound_fragment_size and not average_fragment_size.",
            "required": [
                "lower_bound_fragment_size"
            ],
            "not": {
                "required": [
                    "average_fragment_size"
                ]
            }
        },
        "fragment_length_CV": {
            "not": {
                "required": [
                    "fragment_length_SD"
                ]
            }
        },
        "fragment_length_SD": {
            "not": {
                "required": [
                    "fragment_length_CV"
                ]
            }
        },
        "nucleic_acid_term_name": {
            "oneOf": [
                {
                    "required": [
                        "strand_specificity"
                    ],
                    "properties": {
                        "nucleic_acid_term_name": {
                            "enum": [
                                "RNA",
                                "miRNA",
                                "polyadenylated mRNA",
                                "capped mRNA"
                            ]
                        }
                    }
                },
                {
                    "properties": {
                        "nucleic_acid_term_name": {
                            "enum": [
                                "DNA",
                                "protein"
                            ]
                        }
                    }
                }
            ]
        }
    },
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "accession": {
            "accessionType": "LB"
        },
        "nucleic_acid_term_name": {
            "title": "Library Material",
            "description": "SO (Sequence Ontology) term best matching the molecule isolated to generate the library.",
            "comment": "For example, 'RNA' is appropriate for a total RNA library, even if that library is subsequently reverse transcribed for DNA sequencing.",
            "type": "string",
            "enum": [
                "DNA",
                "miRNA",
                "polyadenylated mRNA",
                "protein",
                "RNA",
                "capped mRNA"
            ]
        },
        "strand_specificity": {
            "title": "Strand Specificity",
            "description": "The strandedness of an RNA-based library, forward or reverse resulting from a strand-specific protocol, or unstranded.",
            "type": "string",
            "enum": [
                "forward",
                "reverse",
                "unstranded"
            ]
        },
        "lower_bound_fragment_size": {
            "title": "Lower Bound Fragment Size",
            "description": "Lower bound of fragment size of the library.",
            "type": "number"
        },
        "upper_bound_fragment_size": {
            "title": "Upper Bound Fragment Size",
            "description": "Upper bound of fragment size of the library.",
            "type": "number"
        },
        "average_fragment_size": {
            "title": "Average Fragment Size",
            "description": "The average size of a fragment in the library, in bp.",
            "type": "number",
            "minimum": 0
        },
        "fragment_length_CV": {
            "title": "Coefficient of Variation of Fragment Length.",
            "description": "The coefficient of variation for the size distribution of library fragments expressed as a percentage.",
            "type": "number",
            "minimum": 0,
            "maximum": 100
        },
        "fragment_length_SD": {
            "title": "Standard Deviation in Fragment Size.",
            "description": "The standard deviation for the size distribution of library fragments.",
            "type": "number",
            "minimum": 0
        },
        "rna_integrity_number": {
            "title": "RNA Integrity Number",
            "description": "The RNA integrity number (RIN) value.",
            "type": "number",
            "minimum": 1,
            "maximum": 10
        },
        "dbxrefs": {
            "@type": "@id",
            "rdfs:subPropertyOf": "rdfs:seeAlso",
            "title": "External resources",
            "description": "Identifiers from external resources that may have 1-to-1 or 1-to-many relationships with IGVF objects.",
            "type": "array",
            "default": [],
            "uniqueItems": true,
            "items": {
                "title": "External identifier",
                "description": "Identifier from an external resource that may have 1-to-1 or 1-to-many relationships with IGVF objects.",
                "type": "string",
                "pattern": "^(GEO:GSM\\d+)$"
            }
        }
    },
    "columns": {
        "accession": {
            "title": "Accession"
        },
        "aliases": {
            "title": "Aliases"
        },
        "award": {
            "title": "Award"
        },
        "lab": {
            "title": "Lab"
        },
        "nucleic_acid_term_name": {
            "title": "Library material"
        }
    },
    "boost_values": {
        "accession": 1.0,
        "alternate_accessions": 1.0,
        "aliases": 1.0,
        "dbxrefs": 1.0,
        "notes": 1.0,
        "@type": 1.0
    },
    "changelog": "/profiles/changelogs/sequencing_library.md"
}
