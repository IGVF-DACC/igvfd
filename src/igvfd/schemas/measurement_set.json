{
    "title": "Measurement Set",
    "$id": "/profiles/measurement_set.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "A file set for a distinct measurement, such as the sequencing of a genomic library generated by an experiment performed on a cell line. A measurement set contains the raw data files generated by the measurement.",
    "type": "object",
    "anyOf": [
        {
            "required": [
                "award",
                "lab",
                "assay_term",
                "samples"
            ]
        },
        {
            "required": [
                "award",
                "lab",
                "assay_term",
                "donors"
            ]
        }
    ],
    "identifyingProperties": [
        "uuid",
        "accession",
        "alternate_accessions",
        "aliases"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "file_set.json#/properties"
        },
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        },
        {
            "$ref": "mixins.json#/publication_identifiers"
        }
    ],
    "dependentSchemas": {
        "$merge": [
            "file_set.json#/dependentSchemas"
        ]
    },
    "dependentRequired": {
        "moi": [
            "construct_libraries"
        ]
    },
    "properties": {
        "schema_version": {
            "default": "6"
        },
        "assay_term": {
            "title": "Assay Term",
            "description": "The assay used to produce data in this measurement set.",
            "comment": "See assay_term.json for available identifiers.",
            "type": "string",
            "linkTo": "AssayTerm"
        },
        "library_construction_platform": {
            "title": "Library Construction Platform",
            "description": "The platform used to construct the library sequenced in this measurement set.",
            "comment": "See platform_term.json for available identifiers.",
            "type": "string",
            "linkTo": "PlatformTerm"
        },
        "protocol": {
            "title": "Protocol",
            "description": "Link to the protocol for conducting the assay on Protocols.io.",
            "type": "string",
            "pattern": "^https://www\\.protocols\\.io/(\\S+)$"
        },
        "construct_libraries": {
            "permission": "import_items",
            "comment": "Do not submit. This property has been moved to Sample objects.",
            "title": "Construct Libraries",
            "description": "The construct libraries of vectors introduced to the biosample used to produce data in this measurement set.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "title": "Construct Library",
                "type": "string",
                "linkTo": "ConstructLibrary"
            }
        },
        "preferred_assay_title": {
            "title": "Preferred Assay Title",
            "description": "The custom lab preferred label for the experiment performed in this measurement set.",
            "type": "string",
            "enum": [
                "10x multiome",
                "10x multiome with MULTI-seq",
                "AAV-MPRA",
                "CERES-seq",
                "Cell painting",
                "CRISPR FlowFISH",
                "DOGMA-seq",
                "lentiMPRA",
                "MERFISH",
                "MIAA",
                "mN2H",
                "MPRA (scQer)",
                "MULTI-seq",
                "Parse Split-seq",
                "Perturb-seq",
                "Saturation genome editing",
                "scNT-seq",
                "semi-qY2H",
                "SHARE-Seq",
                "smFISH",
                "snmC-Seq2",
                "snMCT-seq",
                "SUPERSTARR",
                "TAP-seq",
                "VAMP-seq",
                "Variant FlowFISH",
                "Variant painting",
                "Yeast two-hybrid",
                "yN2H"
            ]
        },
        "readout": {
            "title": "Readout",
            "description": "The assay term corresponding to the data readout of this measurement set.",
            "comment": "This property should be used on CRISPR screen and MPRA measurement sets. See assay_term.json for available identifiers.",
            "type": "string",
            "linkTo": "AssayTerm"
        },
        "moi": {
            "permission": "import_items",
            "comment": "Do not submit. This property has been moved to Sample objects.",
            "title": "Multiplicity Of Infection",
            "description": "The actual multiplicity of infection (MOI) for vectors introduced to the biosample used to produce data in this measurement set. At least one construct library must be specified in order to specify MOI. This property should capture the actual MOI, and not the targeted MOI.",
            "type": "number",
            "minimum": 0
        },
        "multiome_size": {
            "title": "Multiome Size",
            "description": "The number of datasets included in the multiome experiment this measurement set is a part of.",
            "type": "number",
            "minimum": 2
        },
        "nucleic_acid_delivery": {
            "permission": "import_items",
            "comment": "Do not submit. This property has been moved to Sample objects.",
            "title": "Nucleic Acid Delivery",
            "type": "string",
            "enum": [
                "transfection",
                "adenoviral transduction",
                "lentiviral transduction"
            ]
        },
        "control_file_sets": {
            "title": "Controls",
            "description": "File sets that can serve as scientific controls for this measurement_set.",
            "type": "array",
            "minimum": 1,
            "uniqueItems": true,
            "items": {
                "title": "Control",
                "description": "File sets that can serve as scientific controls for this measurement_set.",
                "comment": "See fileset.json for a list of available identifiers.",
                "type": "string",
                "linkTo": "FileSet"
            }
        },
        "sequencing_library_type": {
            "title": "Sequencing Library Type",
            "description": "Description of the library sequenced in this measurement set.",
            "type": "array",
            "minimum": 1,
            "uniqueItems": true,
            "items": {
                "type": "string",
                "enum": [
                    "direct RNA",
                    "exome capture",
                    "mRNA enriched",
                    "rRNA depleted",
                    "polyA depleted",
                    "polyA enriched"
                ]
            }
        },
        "auxiliary_sets": {
            "title": "Auxiliary Sets",
            "description": "The auxiliary sets of files produced alongside raw data from this measurement set.",
            "type": "array",
            "minimum": 1,
            "uniqueItems": true,
            "items": {
                "title": "Auxiliary Set",
                "description": "An auxiliary set of files produced alongside raw data from this measurement set.",
                "comment": "See auxiliary_set.json for a list of available identifiers.",
                "type": "string",
                "linkTo": "AuxiliarySet"
            }
        }
    },
    "fuzzy_searchable_fields": [
        "@type",
        "assay_term.term_name",
        "collections",
        "lab.title",
        "preferred_assay_title",
        "samples.summary",
        "samples.sample_terms",
        "submitted_by.title",
        "summary"
    ],
    "exact_searchable_fields": [
        "auxiliary_sets.accession",
        "auxiliary_sets.aliases",
        "dbxrefs",
        "files.accession",
        "files.aliases",
        "related_multiome_datasets.accession",
        "control_file_sets.accession",
        "control_file_sets.aliases",
        "control_for.accession",
        "control_for.aliases",
        "samples.accession",
        "samples.aliases",
        "samples.donors.accession",
        "samples.donors.aliases"
    ],
    "changelog": "/profiles/changelogs/measurement_set.md"
}
