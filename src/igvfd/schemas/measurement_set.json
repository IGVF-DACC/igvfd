{
    "title": "Measurement Set",
    "$id": "/profiles/measurement_set.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Schema for a measurement set.",
    "type": "object",
    "required": [
        "award",
        "lab",
        "assay_term"
    ],
    "identifyingProperties": [
        "uuid",
        "accession",
        "alternate_accessions",
        "aliases"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "file_set.json#/properties"
        },
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        },
        {
            "$ref": "mixins.json#/publication_identifiers"
        }
    ],
    "dependentSchemas": {
        "$merge": [
            "file_set.json#/dependentSchemas"
        ]
    },
    "dependentRequired": {
        "moi": [
            "construct_libraries"
        ]
    },
    "properties": {
        "schema_version": {
            "default": "5"
        },
        "assay_term": {
            "title": "Assay Term",
            "description": "The assay used to produce data in this measurement set.",
            "comment": "See assay_term.json for available identifiers.",
            "type": "string",
            "linkTo": "AssayTerm"
        },
        "library_construction_platform": {
            "title": "Library Construction Platform",
            "description": "The platform used to construct the library sequenced in this measurement set.",
            "comment": "See platform_term.json for available identifiers.",
            "type": "string",
            "linkTo": "PlatformTerm"
        },
        "protocol": {
            "title": "Protocol",
            "description": "Link to the protocol for conducting the assay on Protocols.io.",
            "type": "string",
            "pattern": "^https://www\\.protocols\\.io/(\\S+)$"
        },
        "construct_libraries": {
            "title": "Construct Libraries",
            "description": "The construct libraries of vectors introduced to the biosample used to produce data in this measurement set.",
            "comment": "See construct_library.json for available identifiers.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "title": "Construct Library",
                "type": "string",
                "linkTo": "ConstructLibrary"
            }
        },
        "preferred_assay_title": {
            "title": "Preferred Assay Title",
            "description": "The custom lab preferred label for the experiment performed in this measurement set.",
            "type": "string",
            "enum": [
                "10x multiome",
                "AAV-MPRA",
                "Cell painting",
                "CRISPR FlowFISH",
                "DOGMA-seq",
                "lentiMPRA",
                "MERFISH",
                "MIAA",
                "mN2H",
                "MPRA (scQer)",
                "MULTI-seq",
                "Perturb-seq",
                "Saturation genome editing",
                "scNT-seq",
                "semi-qY2H",
                "SHARE-Seq",
                "smFISH",
                "snmC-Seq2",
                "TAP-seq",
                "VAMP-seq",
                "Variant painting",
                "Yeast two-hybrid",
                "yN2H"
            ]
        },
        "moi": {
            "title": "Multiplicity Of Infection",
            "description": "The actual multiplicity of infection (MOI) for vectors introduced to the biosample used to produce data in this measurement set. At least one construct library must be specified in order to specify MOI. This property should capture the actual MOI, and not the targeted MOI.",
            "type": "number",
            "minimum": 0
        },
        "multiome_size": {
            "title": "Multiome Size",
            "description": "The number of datasets included in the multiome experiment this measurement set is a part of.",
            "type": "number",
            "minimum": 2
        },
        "nucleic_acid_delivery": {
            "title": "Nucleic Acid Delivery",
            "description": "Method of introduction of nucleic acid into the cell.",
            "type": "string",
            "enum": [
                "transfection",
                "adenoviral transduction",
                "lentiviral transduction"
            ]
        },
        "control_file_sets": {
            "title": "Controls",
            "description": "File sets that can serve as scientific controls for this measurement_set.",
            "type": "array",
            "minimum": 1,
            "uniqueItems": true,
            "items": {
                "title": "Control",
                "description": "File sets that can serve as scientific controls for this measurement_set.",
                "comment": "See fileset.json for a list of available identifiers.",
                "type": "string",
                "linkTo": "FileSet"
            }
        },
        "sequencing_library_type": {
            "title": "Sequencing Library Type",
            "description": "Description of the library sequenced in this measurement set.",
            "type": "array",
            "minimum": 1,
            "uniqueItems": true,
            "items": {
                "type": "string",
                "enum": [
                    "direct RNA",
                    "exome capture",
                    "mRNA enriched",
                    "rRNA depleted",
                    "polyA depleted",
                    "polyA enriched"
                ]
            }
        }
    },
    "fuzzy_searchable_fields": [
        "@type",
        "assay_term.term_name",
        "collections",
        "lab.title",
        "preferred_assay_title",
        "samples.summary",
        "samples.biosample_term",
        "submitted_by.title",
        "summary"
    ],
    "exact_searchable_fields": [
        "dbxrefs",
        "files.accession",
        "files.aliases",
        "related_multiome_datasets.accession",
        "control_file_sets.accession",
        "control_file_sets.aliases",
        "control_for.accession",
        "control_for.aliases",
        "samples.accession",
        "samples.aliases",
        "samples.donors.accession",
        "samples.donors.aliases"
    ],
    "changelog": "/profiles/changelogs/measurement_set.md"
}
