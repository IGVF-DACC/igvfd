{
    "title": "Measurement Set",
    "$id": "/profiles/measurement_set.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Schema for a measurement set.",
    "type": "object",
    "required": [
        "award",
        "lab",
        "assay_term"
    ],
    "identifyingProperties": [
        "uuid",
        "accession",
        "alternate_accessions",
        "aliases"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "file_set.json#/properties"
        },
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/documents"
        }
    ],
    "dependentSchemas": {
        "$merge": [
            "file_set.json#/dependentSchemas"
        ]
    },
    "dependentRequired": {
        "moi": [
            "construct_libraries"
        ]
    },
    "properties": {
        "schema_version": {
            "default": "4"
        },
        "assay_term": {
            "title": "Assay Term",
            "description": "The assay used to produce data in this measurement set.",
            "comment": "See assay_term.json for available identifiers.",
            "type": "string",
            "linkTo": "AssayTerm"
        },
        "library_construction_platform": {
            "title": "Library Construction Platform",
            "description": "The platform used to construct the library sequenced in this measurement set.",
            "comment": "See platform_term.json for available identifiers.",
            "type": "string",
            "linkTo": "PlatformTerm"
        },
        "protocol": {
            "title": "Protocol",
            "description": "Link to the protocol for conducting the assay on Protocols.io.",
            "type": "string",
            "pattern": "^https://www\\.protocols\\.io/(\\S+)$"
        },
        "construct_libraries": {
            "title": "Construct Libraries",
            "description": "The construct libraries of vectors introduced to the biosample used to produce data in this measurement set.",
            "comment": "See construct_library.json for available identifiers.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "title": "Construct Library",
                "type": "string",
                "linkTo": "ConstructLibrary"
            }
        },
        "preferred_assay_title": {
            "title": "Preferred Assay Title",
            "description": "The custom lab preferred label for the experiment performed in this measurement set.",
            "type": "string",
            "enum": [
                "Cell painting",
                "DOGMA-seq",
                "MERFISH",
                "MIAA",
                "Perturb-seq",
                "Saturation genome editing",
                "scNT-seq",
                "SHARE-Seq",
                "smFISH",
                "snmC-Seq2",
                "TAP-seq",
                "VAMP-seq",
                "Variant painting",
                "Yeast two-hybrid"
            ]
        },
        "moi": {
            "title": "Multiplicity Of Infection",
            "description": "The actual multiplicity of infection (MOI) for vectors introduced to the biosample used to produce data in this measurement set. At least one construct library must be specified in order to specify MOI. This property should capture the actual MOI, and not the targeted MOI.",
            "type": "number",
            "minimum": 0
        },
        "multiome_size": {
            "title": "Multiome Size",
            "description": "The number of datasets included in the multiome experiment this measurement set is a part of.",
            "type": "number",
            "minimum": 2
        },
        "seqspec": {
            "title": "Link to seqspec YAML File",
            "description": "A URL link to the YAML file in the seqspec repository associated with this measurement set.",
            "comment": "The repository for seqspec is located here: https://github.com/IGVF/seqspec.",
            "type": "string",
            "format": "uri",
            "pattern": "^https?://github\\.com/IGVF/seqspec/blob/main/assays/\\S+/spec\\.yaml$"
        }
    },
    "fuzzy_searchable_fields": [
        "assay_term.term_name",
        "lab.title",
        "preferred_assay_title"
    ],
    "exact_searchable_fields": [
        "@type",
        "dbxrefs",
        "files"
    ],
    "changelog": "/profiles/changelogs/measurement_set.md"
}
